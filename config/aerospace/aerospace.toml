after-startup-command = []
start-at-login = false
enable-normalization-flatten-containers = true
enable-normalization-opposite-orientation-for-nested-containers = true
accordion-padding = 30
default-root-container-layout = 'tiles'

# Possible values: horizontal|vertical|auto
# 'auto' means: wide monitor (anything wider than high) gets horizontal orientation,
#               tall monitor (anything higher than wide) gets vertical orientation
default-root-container-orientation = 'auto'
on-focused-monitor-changed = ['move-mouse monitor-lazy-center']

# prevent cmd+h
automatically-unhide-macos-hidden-apps = true

[exec]
inherit-env-vars = true
[exec.env-vars]
PATH = '${PATH}:/opt/homebrew/bin:/opt/homebrew/sbin:~/.local/bin:~/PersonalConfigs/oven/bin'

[key-mapping]
preset = 'qwerty'

[gaps]
inner.horizontal = [{ monitor.'BenQ RD280U' = 5 }, 5]
inner.vertical =   [{ monitor.'BenQ RD280U' = 5 }, 5]
outer.left =       [{ monitor.'BenQ RD280U' = 10 }, 0]
outer.bottom =     [{ monitor.'BenQ RD280U' = 10 }, 0]
outer.top =        [{ monitor.'BenQ RD280U' = 10 }, 0]
outer.right =      [{ monitor.'BenQ RD280U' = 10 }, 0]

# 'main' binding mode declaration
# See: https://nikitabobko.github.io/AeroSpace/guide#binding-modes
# 'main' binding mode must be always presented
# Fallback value (if you omit the key): mode.main.binding = {}
[mode.main.binding]

# cmd-h = [] # Disable "hide application"
cmd-m = [] # Disables "minimise application"
cmd-alt-h = [] # Disable "hide others", i only hit this by accident

# See: https://nikitabobko.github.io/AeroSpace/commands#layout
cmd-ctrl-space = 'fullscreen'
# cmd-ctrl-space = 'layout h_tiles h_accordion'

# See: https://nikitabobko.github.io/AeroSpace/commands#focus
cmd-ctrl-h = 'focus --boundaries-action wrap-around-the-workspace left'
cmd-ctrl-j = 'focus --boundaries-action wrap-around-the-workspace down'
cmd-ctrl-k = 'focus --boundaries-action wrap-around-the-workspace up'
cmd-ctrl-l = 'focus --boundaries-action wrap-around-the-workspace right'

cmd-ctrl-m = 'mode move'
# cmd-ctrl-comma = 'exec-and-forget ~/.local/bin/a-full'
# cmd-ctrl-comma = 'exec-and-forget ~/.config/aerospace/full.sh'

# See: https://nikitabobko.github.io/AeroSpace/commands#workspace
cmd-ctrl-u = 'workspace primary'
cmd-ctrl-i = 'workspace alt' # usually the browser
cmd-ctrl-o = 'workspace social' # teams/slack/whatsapp etc
cmd-ctrl-p = 'workspace planner' # things like calendar, notes, todos etc
cmd-ctrl-y = 'workspace figma' # gets own space
cmd-ctrl-n = 'workspace other' # all the other things i've dismissed
cmd-ctrl-t = 'workspace test' # test should always allow floating windows for things like ui browser testing to run consistently
cmd-ctrl-comma = 'workspace ide'

# See: https://nikitabobko.github.io/AeroSpace/commands#workspace-back-and-forth
alt-tab = 'workspace-back-and-forth'
# See: https://nikitabobko.github.io/AeroSpace/commands#move-workspace-to-monitor
alt-shift-tab = 'move-workspace-to-monitor --wrap-around next'

# See: https://nikitabobko.github.io/AeroSpace/commands#mode

# OLD: cmd-ctrl-semicolon = ['mode service', 'exec-and-forget notif --id service-help --aerospace "<r>reload <shift-r>flatten<><backspace>close <f>float <a>accordion<><t>tile"']
cmd-ctrl-semicolon = ['mode service']

# 'service' binding mode declaration.
# See: https://nikitabobko.github.io/AeroSpace/guide#binding-modes
[mode.service.binding]
esc = 'mode main'
# OLD: r = ['exec-and-forget notif --clear service-help', 'reload-config', 'mode main', 'exec-and-forget notif --aerospace reloaded config']
r = ['reload-config', 'mode main']
shift-r = ['flatten-workspace-tree', 'mode main'] # reset layout
backspace = ['close-all-windows-but-current', 'mode main']
equal = ['balance-sizes', 'mode main']

f = ['layout floating tiling', 'mode main']
a = ['layout h_accordion', 'mode main']
t = ['layout tiles', 'mode main']

[mode.move.binding]
esc = 'mode main'

h = ['move left', 'mode main']
j = ['move down', 'mode main']
k = ['move up', 'mode main']
l = ['move right', 'mode main']

ctrl-h = 'resize width +50'
ctrl-l = 'resize width -50'
ctrl-j = 'resize height -50'
ctrl-k = 'resize height +50'

shift-h = 'join-with left'
shift-j = 'join-with down'
shift-k = 'join-with up'
shift-l = 'join-with right'

u = ['move-node-to-workspace --focus-follows-window primary', 'mode main']
i = ['move-node-to-workspace --focus-follows-window alt', 'mode main']
o = ['move-node-to-workspace --focus-follows-window social', 'mode main']
p = ['move-node-to-workspace --focus-follows-window planner', 'mode main']
y = ['move-node-to-workspace --focus-follows-window figma', 'mode main']
n = ['move-node-to-workspace --focus-follows-window other', 'mode main']
t = ['move-node-to-workspace --focus-follows-window test', 'mode main']
comma = ['move-node-to-workspace --focus-follows-window ide', 'mode main']

# https://nikitabobko.github.io/AeroSpace/guide#on-window-detected-callback
#####################################
# Main
[[on-window-detected]]
if.app-id = 'net.kovidgoyal.kitty'
run = 'move-node-to-workspace primary'
[[on-window-detected]] ## not sure about this
if.app-name-regex-substring = 'Cursor'
run = 'move-node-to-workspace ide'

# [[on-window-detected]]
# if.app-id = 'com.google.Chrome'
# run = 'move-node-to-workspace alt'

[[on-window-detected]]
if.app-id = 'company.thebrowser.Browser'
run = 'move-node-to-workspace alt'

#####################################
# Special
[[on-window-detected]]
if.app-id = 'com.figma.Desktop'
run = 'move-node-to-workspace figma'

[[on-window-detected]]
if.app-id = 'com.anthropic.claudefordesktop'
run = 'move-node-to-workspace figma'

#####################################
# Test

# always own screen and flexible for ui testing
[[on-window-detected]]
if.app-id = 'com.google.Chrome'
run = ['layout floating', 'move-node-to-workspace test']
[[on-window-detected]]
if.app-id = 'org.chromium.Chromium'
run = ['layout floating', 'move-node-to-workspace test']
[[on-window-detected]]
if.app-id = 'org.mozilla.firefox'
run = ['layout floating', 'move-node-to-workspace test']
[[on-window-detected]]
if.app-id = 'org.mozilla.firefoxdeveloperedition'
run = ['layout floating', 'move-node-to-workspace test']
[[on-window-detected]]
if.app-id = 'org.mozilla.nightly'
run = ['layout floating', 'move-node-to-workspace test']

# deno markdown preview
# [[on-window-detected]]
# if.window-title-regex-substring = 'Peek preview'
# run = 'layout tiling'

#####################################
# Planning
[[on-window-detected]]
if.app-id = 'com.TickTick.task.mac'
run = 'move-node-to-workspace planner'

[[on-window-detected]]
if.app-id = 'com.todoist.mac.Todoist'
run = 'move-node-to-workspace planner'

[[on-window-detected]]
if.app-id = 'md.obsidian'
run = 'move-node-to-workspace planner'

#####################################
# Social
[[on-window-detected]]
if.app-id = 'net.whatsapp.WhatsApp'
run = 'move-node-to-workspace social'

[[on-window-detected]]
if.app-name-regex-substring = '(Slack|Teams)'
run = 'move-node-to-workspace social'

[[on-window-detected]]
if.app-id = 'com.apple.mail'
run = 'move-node-to-workspace social'

#####################################
# Media
[[on-window-detected]]
if.app-id = 'com.spotify.client'
run = 'move-node-to-workspace other'

[[on-window-detected]]
if.app-id = 'com.TickTick.task.mac'
run = 'move-node-to-workspace planner'

#####################################
# Tiles Floats

# TODO: annoyingly this goes mental as the emulator wants to resize itself too
# Android emulator

# [[on-window-detected]]
# if.window-title-regex-substring='Android Emulator'
# if.during-aerospace-startup = false #set it to false explicitly
# run = 'layout tiling'  # The callback itself

#####################################
# Floats
[[on-window-detected]]
if.app-name-regex-substring = 'Simulator'
run = 'layout floating'

[[on-window-detected]]
if.app-id = 'com.1password.1password'
run = 'layout floating'
[[on-window-detected]]
if.app-id = 'com.paloaltonetworks.GlobalProtect.client'
run = 'layout floating'

# [[on-window-detected]] # Everything else float (opt IN behaviour)
# if.app-name-regex-substring = '.'
# run = 'layout floating'
