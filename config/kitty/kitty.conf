# vim:fileencoding=utf-8:foldmethod=marker:foldlevel=0

#: environment {{{

env XDG_CONFIG_HOME=${HOME}/.config
env XDG_DATA_HOME=${HOME}/.local/share
env XDG_STATE_HOME=${HOME}/.local/state
env XDG_CACHE_HOME=${HOME}/.local/cache
env CARGO_BIN=${XDG_DATA_HOME}/cargo/bin
env PATH=${HOME}/.local/bin:/opt/homebrew/bin:${CARGO_BIN}:${HOME}/.volta/bin:${PATH}
env VOLTA_HOME=${HOME}/.volta
env KSM_WORK=1

exe_search_path ~/.config/kitty/bin

#: }}}
#: shell & editor {{{

shell nu -l
editor nvim

#: }}}
#: appearance {{{

background_opacity 0.85

#: }}}
#: status bar {{{

# Tab bar positioning and basic style
tab_bar_edge top
tab_bar_align center
tab_bar_style separator
tab_separator " "
# tab_bar_style powerline
# tab_powerline_style round
tab_bar_min_tabs 1

# Tab bar margins and spacing
tab_bar_margin_width 0.0
tab_bar_margin_height 0.0 0.0

active_tab_font_style bold

inactive_tab_font_style normal

# Tab title template (clean like tmux)
# tab_title_template " {title.split('/')[-1]} "
# tab_title_template "{sub.index} {title.split('/')[-1]} {tab.active_exe} {layout_name} {sub.num_window_groups}"
tab_title_template " {title} "
active_tab_title_template " {'+{} '.format(num_windows - 1) if layout_name == 'stack' else ''}{title} "

# Note: Kitty doesn't have a direct equivalent to tmux's status-left/status-right
# The closest approximation is using the tab bar with custom formatting
# For session-like information, we rely on window titles and tab organization

# Bell styling for notifications (similar to tmux message style)
bell_on_tab "ðŸ”” "

# Show tab activity
tab_activity_symbol ""

#: }}}
#: keys {{{

include ./keys.conf

#: }}}
#: fonts {{{

# https://helpx.adobe.com/fonts/using/open-type-syntax.html for features
#
# To get a full list of supported fonts use the `kitty +list-fonts` command.
# also `kitty +list-fonts --psnames`
# easier: `kitten choose-fonts`

font_size          14.0
modify_font cell_height 130%

modify_font underline_position 1

# https://rubjo.github.io/victor-mono/
font_family      family="Victor Mono" features='salt=2 cv01=1 cv02=1 cv06=1 cv14=1 +zero +onum +ss04 cv18=1 cv30=1 +ss09 +ss07'
bold_font        auto
italic_font      auto
bold_italic_font auto

#: }}}
#: remote control & integration {{{

allow_remote_control yes
listen_on unix:/tmp/mykitty
shell_integration enabled
startup_session ./sessions/init.session

#: }}}
#: window & layout {{{

# this tends to be problematic on monitor change
# remember_window_position yes
window_padding_width 3
placement_strategy center
hide_window_decorations titlebar-only
macos_show_window_title_in none
confirm_os_window_close -1
macos_option_as_alt yes
cursor_trail 1
# show if not visible after 10 seconds
notify_on_cmd_finish invisible 10
# enabled_layouts splits:split_axis=horizontal,stack
enabled_layouts tall:bias=70,stack
visual_window_select_characters ajkl;sdfuiopqwer

#: }}}
#: clipboard & mouse {{{

clipboard_control write-clipboard write-primary no-append
mouse_hide_wait 0.1
copy_on_select clipboard
# remove trailing spaces
strip_trailing_spaces smart

#: }}}
#: scrollback {{{

scrollback_pager_history_size 2
scrollback_fill_enlarged_window yes
wheel_scroll_multiplier 5.0
touch_scroll_multiplier 3.0
scrollback_pager_history_size 1

#: }}}
#: theme {{{

active_border_color #b4befe
inactive_border_color #6c7086

# BEGIN_KITTY_THEME
# RosÃ© Pine Moon
include current-theme.conf
# END_KITTY_THEME

#: }}}
